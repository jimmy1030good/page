<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>아주르 정보 뷰어</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.final.v2.css">
  <meta name="description" content="아주르프로밀리아 캐릭터/키보 정보 보기">
  <meta name="keywords" content="아주르프로밀리아, 캐릭터, 키보, 게임">
  <meta property="og:title" content="아주르 정보 뷰어">
  <meta property="og:description" content="아주르프로밀리아 캐릭터/키보 정보 뷰어">
</head>
<body>
  <div id="loader" class="loader-container">
    <div class="spinner"></div>
    <p>로딩 중...</p>
  </div>

  <div id="toast-container"></div>

  <header>
    <h1>아주르 정보 뷰어</h1>
    <nav>
      <button data-target="character" class="nav-btn">캐릭터</button>
      <button data-target="keyboard" class="nav-btn">키보</button>
      <button data-target="stats" class="nav-btn">통계</button>
      <button data-target="community" class="nav-btn">커뮤니티</button>
      <button data-target="minigame" class="nav-btn">미니게임</button>
    </nav>
  </header>

  <main id="main-content" class="hidden">
    <section id="character" class="panel">
      <div class="filter-container">
        <div class="search-box">
          <input type="text" id="search-input" placeholder="이름 또는 키워드 검색...">
          <button id="search-button" class="btn btn-primary">검색</button>
        </div>

        <div class="filter-panel">
          <div class="filter-group">
            <h3>속성</h3>
            <div class="chip-group attribute-filters" id="attribute-filters"></div>
          </div>
          <div class="filter-group">
            <h3>종족</h3>
            <div class="chip-group race-filters" id="race-filters"></div>
          </div>
        </div>

        <div class="filter-actions">
          <button id="apply-filters" class="btn btn-primary">필터 적용</button>
          <button id="reset-filters" class="btn btn-secondary">필터 초기화</button>
        </div>

        <div class="filter-summary">
          <span id="result-count">0</span> 개 결과
          <div id="active-filters"></div>
        </div>
      </div>

      <div id="item-list"></div>
    </section>

    <section id="keyboard" class="panel">
      <h2>키보</h2>
      <div class="section-content">
        <div class="keyboard-list"></div>
      </div>
    </section>

    <section id="stats" class="panel">
      <h2>통계</h2>
      <div class="stats-container">
        <div class="stats-card">
          <canvas id="attribute-chart-canvas" class="chart-container"></canvas>
        </div>
        <div class="stats-card">
          <canvas id="race-chart-canvas" class="chart-container"></canvas>
        </div>
        <div class="stats-card">
          <canvas id="channel-chart-canvas" class="chart-container"></canvas>
        </div>
        <div class="stats-card">
          <canvas id="kibo-attribute-chart-canvas" class="chart-container"></canvas>
        </div>
      </div>
    </section>

    <section id="community" class="panel">
      <h2>커뮤니티</h2>
      <div class="community-card">
        <div class="community-stats">
          <div class="stat-item">
            <span class="stat-label">총 캐릭터</span>
            <span class="stat-value" id="total-characters">-</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">총 키보</span>
            <span class="stat-value" id="total-kibos">-</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">공개 채널</span>
            <span class="stat-value" id="total-channels">-</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">마지막 업데이트</span>
            <span class="stat-value" id="last-updated">-</span>
          </div>
        </div>
      </div>

      <div class="community-links" style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
        <a href="https://azurpromilia.com" class="community-link btn btn-secondary" target="_blank" rel="noopener">공식 사이트</a>
        <a href="https://x.com/AzurPromilia" class="community-link btn btn-secondary" target="_blank" rel="noopener">X(트위터)</a>
        <a href="https://www.youtube.com/@AzurPromilia" class="community-link btn btn-secondary" target="_blank" rel="noopener">유튜브</a>
        <a href="https://arca.live/b/azurpromilia" class="community-link btn btn-secondary" target="_blank" rel="noopener">아카라이브</a>
      </div>

      <div id="community-viewer" style="margin-top:12px">
        <iframe id="community-iframe" title="viewer" style="width:100%;height:520px;border:0;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,.08)"></iframe>
        <div id="community-fallback" style="display:none;margin-top:8px;color:#607d8b">
          임베드가 차단된 페이지입니다. 
          <a id="community-open-new" target="_blank" rel="noopener">새 탭에서 열기</a>
        </div>
      </div>
    </section>

    <section id="detail-section" class="panel hidden">
      <button id="back-to-list-button" class="btn btn-secondary">목록으로</button>
      <div id="item-detail"></div>
    </section>

    <section id="minigame" class="panel">
      <h2>미니게임</h2>
      <div class="game-grid" style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px">
        <button id="open-favorite" class="btn btn-primary">최애 찾기</button>
        <button id="open-flashcard" class="btn btn-secondary">플래시 카드</button>
      </div>

      <!-- Tournament -->
      <div id="tournament" class="hidden">
        <div id="matchup-container">
          <div class="match-item" id="match-item-1"></div>
          <div class="vs-divider">VS</div>
          <div class="match-item" id="match-item-2"></div>
        </div>
        <div id="winner-display" class="hidden" style="text-align:center; margin-top:12px">
          <div class="winner-content">
            <h3 class="winner-title">당신의 최애!</h3>
            <div id="final-winner"></div>
          </div>
        </div>
        <div style="display:flex; gap:8px; justify-content:center; margin-top:12px">
          <button id="restart-tournament" class="btn btn-primary">다시 하기</button>
          <button id="back-to-main-menu" class="btn btn-secondary">메인으로</button>
        </div>
      </div>

      <!-- Flashcard -->
      <div id="flashcard-wrap" class="hidden" style="text-align:center">
        <div class="fc-head" style="display:flex; gap:10px; justify-content:center; margin-bottom:8px">
          <span id="fc-counter">1 / 10</span>
          <span id="fc-score">0 점</span>
        </div>
        <img id="fc-image" alt="카드 이미지" style="max-height:320px" />
        <div id="fc-options" class="fc-options" style="display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-top:10px"></div>
        <div id="fc-result" class="hidden" style="margin-top:8px; font-weight:700"></div>
        <div style="margin-top:10px">
          <button id="fc-next" class="btn btn-primary hidden">다음</button>
        </div>
      </div>

      <div id="score-save" class="hidden" style="margin-top:12px; display:flex; gap:8px; align-items:center; justify-content:center">
        <input id="score-nick" placeholder="닉네임" style="padding:10px;border:1px solid #e0e6f0;border-radius:10px;min-width:220px" />
        <button id="score-save-btn" class="btn btn-primary">점수 저장</button>
      </div>

      <h3 id="rank-title" class="hidden">오늘의 점수</h3>
      <ol id="rank-list" class="rank-board"></ol>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="./script.utfsafe.final2.js"></script>
</body>
</html>
